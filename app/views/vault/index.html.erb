<div class="vault-pin" data-controller="vault-pin">
  <div class="vault-pin__head">
    <div class="vault-pin__title">🐴 Vault</div>
    <div class="vault-pin__sub">外に出せない記録（へそくり/領収書）</div>
  </div>

  <%= form_with url: "/api/vault/unlock", method: :post, class: "vault-pin__form" do %>
    <input
      type="password"
      inputmode="numeric"
      autocomplete="one-time-code"
      maxlength="4"
      class="vault-pin__input"
      placeholder="PIN（4桁）"
      data-vault-pin-target="field"
      name="pin"
    />

    <div class="vault-pin__pad">
      <% [1,2,3,4,5,6,7,8,9].each do |n| %>
        <button
          type="button"
          class="vault-pin__key"
          data-val="<%= n %>"
          data-action="click->vault-pin#tap touchstart->vault-pin#touch"
        ><%= n %></button>
      <% end %>

      <button type="button" class="vault-pin__key vault-pin__key--muted"
        data-val="clr" data-action="click->vault-pin#tap touchstart->vault-pin#touch">C</button>

      <button type="button" class="vault-pin__key"
        data-val="0" data-action="click->vault-pin#tap touchstart->vault-pin#touch">0</button>

      <button type="button" class="vault-pin__key vault-pin__key--muted"
        data-val="del" data-action="click->vault-pin#tap touchstart->vault-pin#touch">⌫</button>
    </div>

    <div class="vault-pin__hint">※数字キーが反応しない端末対策でタップ/タッチ両対応</div>
  <% end %>
</div>
