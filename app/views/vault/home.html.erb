<div class="vault-page">
  <div class="vault-hero">
    <h1>ğŸ’° Chargeï¼ˆè£ï¼‰</h1>
    <p>å¤–ã«å‡ºã›ãªã„è¨˜éŒ²ï¼ˆã¸ããã‚Š/é ˜åæ›¸ï¼‰</p>
  </div>

  <% if flash[:notice].present? %>
    <div class="vault-toast"><%= flash[:notice] %></div>
  <% end %>

  <div class="vault-actions">
    <%= link_to "/vault/transfer", class: "vault-action" do %>
      ğŸ’° Chargeï¼ˆIN/OUT/ç«‹æ›¿ï¼‰
    <% end %>

    <%= link_to "/vault/entries?hidden=1", class: "vault-action" do %>
      ğŸ· ã¸ããã‚Šãƒ¡ãƒ¢
    <% end %>

    <%= link_to "/vault/entries/new?kind=expense&hidden=1", class: "vault-action" do %>
      ğŸ§¾ é ˜åæ›¸ï¼ˆå†™ãƒ¡ï¼‰
    <% end %>

    <%= link_to "/vault/entries", class: "vault-action" do %>
      ğŸ“‹ å…¨å±¥æ­´ï¼ˆæ–°ã—ã„é †ï¼‰
    <% end %>
  </div>

  <!-- è‡ªå‹•å‰Šé™¤è­¦å‘Š -->
  <% purge_soon = VaultEntry.where("purge_on <= ?", 30.days.from_now).count rescue 0 %>
  <% if purge_soon > 0 %>
    <div class="vault-warning">
      âš ï¸ <%= purge_soon %>ä»¶ãŒ30æ—¥ä»¥å†…ã«è‡ªå‹•å‰Šé™¤ã•ã‚Œã¾ã™
    </div>
  <% end %>

  <!-- å³å…¨æ¶ˆã—ãƒœã‚¿ãƒ³ -->
  <div class="vault-danger-zone">
    <details>
      <summary class="vault-danger-toggle">ğŸ”¥ å±é™ºæ“ä½œ</summary>
      <div class="vault-danger-content">
        <p>ã™ã¹ã¦ã®Chargeè¨˜éŒ²ã‚’å³åº§ã«å‰Šé™¤ã—ã¾ã™ã€‚ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚</p>
        <%= button_to "å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤", "/api/vault/wipe_all",
            method: :post,
            class: "vault-danger-btn",
            data: { confirm: "æœ¬å½“ã«ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚", turbo_confirm: "æœ¬å½“ã«ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" } %>
      </div>
    </details>
  </div>

  <div class="vault-back">
    <a href="/">â† HUB9 ãƒ›ãƒ¼ãƒ ã¸</a>
  </div>
</div>

<style>
.vault-warning{
  margin: 16px;
  padding: 12px 16px;
  background: #fff3cd;
  border: 1px solid #ffc107;
  border-radius: 12px;
  color: #856404;
  font-size: 14px;
  text-align: center;
}
.vault-danger-zone{
  margin: 24px 16px;
  border: 1px solid #dc3545;
  border-radius: 12px;
  overflow: hidden;
}
.vault-danger-toggle{
  display: block;
  padding: 12px 16px;
  background: #fff5f5;
  color: #dc3545;
  font-weight: 600;
  cursor: pointer;
  list-style: none;
}
.vault-danger-toggle::-webkit-details-marker{ display: none; }
.vault-danger-content{
  padding: 16px;
  background: #fff;
}
.vault-danger-content p{
  font-size: 13px;
  color: #666;
  margin-bottom: 12px;
}
.vault-danger-btn{
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  background: #dc3545;
  color: #fff;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
}
.vault-back{
  text-align: center;
  padding: 24px 16px 40px;
}
.vault-back a{
  color: var(--muted, #666);
  font-size: 14px;
  text-decoration: none;
}
</style>
